<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>POST MESSAGE</title>
  </head>
  <body>
    <h4>主页面</h4>
    <iframe id="iframe" src="http://182.254.197.28/"></iframe>
    <script>
      const iframe = document.getElementById('iframe');
      iframe.onload = () => {
        const data = {
          name: 'yzl',
          age: 20
        };
        // 向domain2传送跨域数据
        iframe.contentWindow.postMessage(JSON.stringify(data), 'http://182.254.197.28/');
      };
      window.addEventListener('message', (e) => {
        console.log('本地接收到数据: ' + e.data);
      }, false);
    </script>
  </body>
</html>


<!-- 远程html -->
<!--<!doctype html>-->
<!--<html lang="en">-->
<!--  <head>-->
<!--    <meta charset="utf-8" />-->
<!--    <title>hello world</title>-->
<!--    <script>-->
<!--      // 接收domain1的数据-->
<!--      window.addEventListener('message', (e) => {-->
<!--        console.log('182.254.197.28接收到数据:' + e.data)-->
<!--        const data = JSON.parse(e.data)-->
<!--        if (data) {-->
<!--          data.name = 'yuzhanglong'-->
<!--          data.age = 20-->
<!--          // 处理后再发回domain1-->
<!--          window.parent.postMessage(JSON.stringify(data), 'http://localhost:63342')-->
<!--        }-->
<!--      }, false)-->
<!--    </script>-->
<!--  </head>-->
<!--  <body>-->
<!--    hello world-->
<!--  </body>-->
<!--</html>-->
