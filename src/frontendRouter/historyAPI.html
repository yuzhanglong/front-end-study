<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>History API</title>
    <script>
      const getHash = () => {
        return location.hash.split('#/')[1]
      }
      const myHashTable = {
        page1: '<div>我是第一页</div>',
        page2: '<div>我是第二页</div>',
        default: 'hello world',
      }

      window.addEventListener('load', () => {
        const newHash = getHash()
        document.body.innerHTML = myHashTable.hasOwnProperty(newHash)
          ? myHashTable[newHash]
          : myHashTable['default']
      })

      window.addEventListener('popstate', () => {
        console.log('popstate!')
        const newHash = getHash()
        document.body.innerHTML = myHashTable.hasOwnProperty(newHash)
          ? myHashTable[newHash]
          : myHashTable['default']
      })

      window.addEventListener('hashchange', (event) => {
        console.log(
          `url Hash值被改变！Old URL: ${event.oldURL}, New URL: ${event.newURL}`
        )
        const newHash = getHash()
        document.body.innerHTML = myHashTable.hasOwnProperty(newHash)
          ? myHashTable[newHash]
          : myHashTable['default']
      })
    </script>
  </head>
  <body>
    hello world
  </body>
</html>
